<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–Ω–∏–≥–∏ –ò–≤–∞–Ω–∞</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #eee;
            min-height: 100vh;
        }
        
        /* Header */
        header {
            text-align: center;
            padding: 40px 20px;
            background: rgba(0,0,0,0.3);
        }
        h1 {
            color: #ffd700;
            font-size: 2.8em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            margin-bottom: 10px;
        }
        .subtitle { color: #aaa; font-size: 1.1em; }
        
        /* Navigation */
        .breadcrumb {
            padding: 15px 20px;
            background: rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }
        .breadcrumb a, .breadcrumb span {
            color: #ffd700;
            text-decoration: none;
            cursor: pointer;
        }
        .breadcrumb a:hover { text-decoration: underline; }
        .breadcrumb .separator { color: #666; }
        
        /* Main content */
        .container { max-width: 1400px; margin: 0 auto; padding: 30px 20px; }
        
        /* Books Grid */
        .books-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
        }
        .book-card {
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .book-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(255,215,0,0.2);
        }
        .book-cover {
            height: 250px;
            background-size: cover;
            background-position: center;
        }
        .book-info { padding: 20px; }
        .book-title { color: #ffd700; font-size: 1.4em; margin-bottom: 10px; }
        .book-desc { color: #aaa; line-height: 1.6; }
        
        /* Chapters List */
        .chapters-list { display: flex; flex-direction: column; gap: 15px; }
        .chapter-card {
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            padding: 20px 25px;
            cursor: pointer;
            transition: background 0.3s;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .chapter-card:hover { background: rgba(255,215,0,0.1); }
        .chapter-number {
            color: #ffd700;
            font-size: 2em;
            font-weight: bold;
            margin-right: 20px;
        }
        .chapter-title { font-size: 1.3em; }
        .chapter-pages { color: #888; }
        
        /* Book Reader */
        .book-spread {
            display: flex;
            background: #fff;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            min-height: 600px;
        }
        .text-page {
            flex: 1;
            padding: 50px 40px;
            background: linear-gradient(to right, #fffef5, #fff8e7);
            color: #333;
            font-size: 18px;
            line-height: 2;
            max-width: 500px;
            border-right: 1px solid #e0d5c0;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        .text-page p {
            margin-bottom: 1.2em;
            text-indent: 1.5em;
        }
        .text-page p:first-child {
            text-indent: 0;
        }
        .image-page {
            flex: 1.3;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #111;
            min-height: 500px;
        }
        .image-page img {
            max-width: 100%;
            max-height: 650px;
            object-fit: contain;
        }
        .image-page .no-image {
            color: #555;
            font-style: italic;
            text-align: center;
            padding: 40px;
        }
        
        /* Page Navigation */
        .page-nav {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 25px;
            margin-top: 25px;
            flex-wrap: wrap;
        }
        .page-nav button {
            padding: 15px 35px;
            font-size: 18px;
            border: none;
            border-radius: 8px;
            background: #ffd700;
            color: #1a1a2e;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.2s, opacity 0.2s;
        }
        .page-nav button:hover:not(:disabled) { transform: scale(1.05); }
        .page-nav button:disabled { opacity: 0.3; cursor: not-allowed; }
        .page-info {
            color: #ffd700;
            font-size: 1.2em;
            min-width: 200px;
            text-align: center;
        }
        
        /* Back button */
        .back-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            color: #ffd700;
            text-decoration: none;
            margin-bottom: 20px;
            cursor: pointer;
            font-size: 1.1em;
        }
        .back-btn:hover { text-decoration: underline; }
        
        /* Responsive */
        @media (max-width: 900px) {
            .book-spread { flex-direction: column; }
            .text-page { max-width: 100%; border-right: none; border-bottom: 1px solid #e0d5c0; }
            .image-page { min-height: 300px; }
            h1 { font-size: 2em; }
        }
    </style>
</head>
<body>
    <header>
        <h1>üìö –ö–Ω–∏–≥–∏ –ò–≤–∞–Ω–∞</h1>
        <p class="subtitle" id="header-subtitle">–ò–ª–ª—é—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏—Å—Ç–æ—Ä–∏–∏, —Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Å –ø–æ–º–æ—â—å—é AI</p>
    </header>
    
    <nav class="breadcrumb" id="breadcrumb">
        <a onclick="showBooks()">–ö–Ω–∏–≥–∏</a>
    </nav>
    
    <div class="container" id="content">
        <p>–ó–∞–≥—Ä—É–∑–∫–∞...</p>
    </div>

    <script>
        let data = null;
        let currentBook = null;
        let currentChapter = null;
        let currentPage = 0;

        // Load data
        fetch('data/content.json')
            .then(r => r.json())
            .then(d => {
                data = d;
                showBooks();
            })
            .catch(e => {
                document.getElementById('content').innerHTML = '<p>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö</p>';
            });

        function showBooks() {
            currentBook = null;
            currentChapter = null;
            document.getElementById('breadcrumb').innerHTML = '<span>üìö –ö–Ω–∏–≥–∏</span>';
            
            let html = '<div class="books-grid">';
            data.books.forEach((book, i) => {
                const coverUrl = book.cover ? encodeURI(book.cover) : '';
                html += `
                    <div class="book-card" onclick="showBook(${i})">
                        <div class="book-cover" style="background-image: url('${coverUrl}')"></div>
                        <div class="book-info">
                            <div class="book-title">${book.title}</div>
                            <div class="book-desc">${book.description}</div>
                        </div>
                    </div>
                `;
            });
            html += '</div>';
            document.getElementById('content').innerHTML = html;
        }

        function showBook(bookIndex) {
            currentBook = data.books[bookIndex];
            currentChapter = null;
            
            document.getElementById('breadcrumb').innerHTML = `
                <a onclick="showBooks()">–ö–Ω–∏–≥–∏</a>
                <span class="separator">‚Ä∫</span>
                <span>${currentBook.title}</span>
            `;
            
            let html = `
                <a class="back-btn" onclick="showBooks()">‚Üê –ù–∞–∑–∞–¥ –∫ –∫–Ω–∏–≥–∞–º</a>
                <h2 style="color: #ffd700; margin-bottom: 30px;">${currentBook.title}</h2>
                <div class="chapters-list">
            `;
            
            currentBook.chapters.forEach((chapter, i) => {
                html += `
                    <div class="chapter-card" onclick="showChapter(${i})">
                        <div style="display: flex; align-items: center;">
                            <span class="chapter-number">${chapter.number}</span>
                            <div>
                                <div class="chapter-title">${chapter.title}</div>
                                <div class="chapter-pages">${chapter.pages.length} —Å—Ç—Ä–∞–Ω–∏—Ü</div>
                            </div>
                        </div>
                        <span style="color: #ffd700; font-size: 1.5em;">‚Üí</span>
                    </div>
                `;
            });
            
            html += '</div>';
            document.getElementById('content').innerHTML = html;
        }

        function showChapter(chapterIndex) {
            currentChapter = currentBook.chapters[chapterIndex];
            currentPage = 0;
            
            document.getElementById('breadcrumb').innerHTML = `
                <a onclick="showBooks()">–ö–Ω–∏–≥–∏</a>
                <span class="separator">‚Ä∫</span>
                <a onclick="showBook(${data.books.indexOf(currentBook)})">${currentBook.title}</a>
                <span class="separator">‚Ä∫</span>
                <span>–ì–ª–∞–≤–∞ ${currentChapter.number}</span>
            `;
            
            renderPage();
        }

        function renderPage() {
            const page = currentChapter.pages[currentPage];
            const textHtml = page.text.split('\n\n').map(p => `<p>${p}</p>`).join('');
            
            let imageHtml;
            if (page.image) {
                const encodedPath = encodeURI(page.image);
                imageHtml = `<img src="${encodedPath}" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ ${page.number}" onerror="this.parentElement.innerHTML='<div class=\\'no-image\\'>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</div>'">`;
            } else {
                imageHtml = `<div class="no-image">üé® –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –µ—â—ë –Ω–µ —Å–æ–∑–¥–∞–Ω–æ</div>`;
            }
            
            const html = `
                <a class="back-btn" onclick="showBook(${data.books.indexOf(currentBook)})">‚Üê –ù–∞–∑–∞–¥ –∫ –≥–ª–∞–≤–∞–º</a>
                
                <div class="book-spread">
                    <div class="text-page">${textHtml}</div>
                    <div class="image-page">${imageHtml}</div>
                </div>
                
                <div class="page-nav">
                    <button onclick="prevPage()" ${currentPage === 0 ? 'disabled' : ''}>‚Üê –ù–∞–∑–∞–¥</button>
                    <span class="page-info">–ì–ª–∞–≤–∞ ${currentChapter.number}, —Å—Ç—Ä–∞–Ω–∏—Ü–∞ ${currentPage + 1} –∏–∑ ${currentChapter.pages.length}</span>
                    <button onclick="nextPage()" ${currentPage >= currentChapter.pages.length - 1 ? 'disabled' : ''}>–í–ø–µ—Ä—ë–¥ ‚Üí</button>
                </div>
            `;
            
            document.getElementById('content').innerHTML = html;
        }

        function prevPage() {
            if (currentPage > 0) { currentPage--; renderPage(); }
        }

        function nextPage() {
            if (currentPage < currentChapter.pages.length - 1) { currentPage++; renderPage(); }
        }
    </script>
</body>
</html>
